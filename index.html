<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta https-equiv="X-UA-Compatible" content="IE=edge">
    <title>siadic.net</title>
    <link rel="icon" href="images/ETCHER.webp" type="image/webp">
    <meta name="description" content="we make music" />
    <meta name="keywords" content="music, bass, canada, british columbia, quebec, montreal, vancouver, sunshine coast" />

    <style>
        html {
            margin: 0;
            height: 100%;  /* Use 100% for full viewport height */
            background-color: black;
            overflow: hidden; /* Prevent scrollbars during transitions */
        }

        body {
            visibility: hidden; /* Start hidden for the initial fade-in */
            background-position: center center;
            background-repeat: no-repeat;
            width: 100%;  /* Full width */
            height: 100%;  /* Full height */
            background-size: cover;
            background-blend-mode: overlay;
            /*  Removed backface-visibility and transform for smoother transitions in some browsers  */
            opacity: 0; /* Start with 0 opacity for fade-in */
            transition: background-image 15s ease-in-out, opacity 3s ease-in-out; /* Slower background transition, initial fade-in */
        }


		body.fade-in {
			opacity: 1; /* Fade in the body */
		}

        .image-container {
            position: absolute; /* Absolute positioning for layering */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0; /* Start hidden */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            transition: opacity 15s ease-in-out; /* Slow opacity transition */
            z-index: 1; /* Ensure images are behind the tooltip and audio controls */
        }
		.image-container.active {
			opacity: 1;
		}

        .coupontooltip {
            color: white;
            margin-left: 14px;
            padding: 5px;
            position: absolute;
            z-index: 1000;
            width: auto;  /* Let width adjust to content */
            white-space: nowrap; /* Prevent text wrapping */
            font-family: Arial, Helvetica, sans-serif;
            font-style: normal;
            font-size: 14px;
            mix-blend-mode: difference;
            opacity: 0; /* Start hidden */
            transition: opacity 1s ease-in-out; /*  Fade-in for the tooltip */
			pointer-events: none; /* make tooltip text not clickable */
        }

        body:hover .coupontooltip {
            opacity: 1; /* Show on hover */
        }

        .audio-wrapper {
            background-color: transparent;
            opacity: 0.8; /*  Slightly visible, but not distracting */
            position: fixed;
            bottom: 10px;
            right: 10px;
            z-index: 1002;
        }

        .audio-wrapper audio {
            background-color: transparent;
        }

        /*  Added a subtle pulse animation to draw slight attention */
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        .audio-wrapper button {
           animation: pulse 5s infinite ease-in-out; /*  Apply the pulse animation */
           border: none;
           background: rgba(255,255,255,0.2);
           color: white;
           padding: 5px 10px;
           cursor: pointer;
		   border-radius: 5px;
        }
		.audio-wrapper button:hover {
			background: rgba(255,255,255,0.4);
		}
		.audio-wrapper input[type="range"]{
			accent-color: white;
		}
    </style>
</head>

<body onload="init()" onclick="openFullscreen()" onbeforeunload="stopInterval()">

    <div class="couponcode">
        <span class="coupontooltip">click for fullscreen, hit spacebar to play/pause music, use up/down for volume</span>
    </div>

    <!--  Image containers will be added here by JavaScript -->
	<div id="image-container-wrapper">
	</div>

    <script type="text/javascript">

		var images = ['images/dedu1.webp', 'images/dedu10.webp', 'images/dedu2.webp',
			'images/dedu3.webp', 'images/dedu4.webp', 'images/dedu5.webp', 'images/dedu6.webp',
			'images/dedu7.webp', 'images/dedu8.webp', 'images/dedu9.webp', 'images/100x.webp', 'images/SEE YOURSELF.webp', 'images/white walls stain glass.webp',
			'images/RESOURCES.webp', 'images/SUNSHINE.webp', 'images/LIFTED.webp', 'images/ETCHER.webp',
			'images/DRIED BERRIES.webp', 'images/BEAN SPROUTS.webp', 'images/FLIES OF MATIC.webp', 'images/PROTON-K.webp'
		];

		var currentIndex = 0;
		var intervalId;
		var imageContainers = [];

		// Pre-load images (good practice for smoother transitions)
		var imgElements = [];
		for (var i = 0; i < images.length; i++) {
			var img = new Image();
			img.src = images[i];
			imgElements.push(img);
		}

		function init() {
			createImageContainers();
			changeBackground();  // Initial background
			intervalId = setInterval(changeBackground, 30000); // Start the cycle
			document.body.classList.add('fade-in'); // fade in the body
		}

		function createImageContainers() {
			var wrapper = document.getElementById('image-container-wrapper'); // the div that holds the image containers
			for (var i = 0; i < 2; i++) { // Create two containers for cross-fading
				var container = document.createElement('div');
				container.classList.add('image-container');
				wrapper.appendChild(container);
				imageContainers.push(container);
			}
		}

		function changeBackground() {
			var nextIndex1 = Math.floor(Math.random() * images.length);
			var nextIndex2 = Math.floor(Math.random() * images.length);
			while (nextIndex1 === nextIndex2) {
				nextIndex2 = Math.floor(Math.random() * images.length);
			}

			// Get the next inactive container
			var nextContainer = imageContainers.find(c => !c.classList.contains('active'));
			var currentContainer = imageContainers.find(c => c.classList.contains('active'));

			// Set the new background on the next container
			nextContainer.style.backgroundImage = `url('${images[nextIndex1]}'), url('${images[nextIndex2]}')`;

			// Fade in the next container, and fade out the current one (if it exists)
			if(currentContainer) {
				currentContainer.classList.remove('active');
			}
			nextContainer.classList.add('active');
		}

		function stopInterval() {
			clearInterval(intervalId);
		}

		// ... (rest of your functions - openSiadicSoundcloud, showMessage, etc. - are unchanged)

		// Tooltip positioning (simplified)
		var tooltip = document.querySelector('.coupontooltip');

		document.addEventListener('mousemove', function(e) {
			tooltip.style.left = e.pageX + 'px';
			tooltip.style.top = e.pageY + 'px';
		});

		var timer;
		window.addEventListener("mousemove", function () {
			tooltip.style.display = "block";  // Or use opacity: 1 for consistency
			clearTimeout(timer);
			timer = setTimeout(function() { tooltip.style.display = 'none'; }, 3000);
		});


		var elem = document.body; //  Redundant, but kept for your original logic
		function openFullscreen() {
			if (document.documentElement.requestFullscreen) {
				document.documentElement.requestFullscreen();
			} else if (document.documentElement.webkitRequestFullScreen) { // Safari
				document.documentElement.webkitRequestFullScreen();
			} else if (document.documentElement.mozRequestFullScreen) { // Old Firefox
				document.documentElement.mozRequestFullScreen();
			} else if (document.documentElement.msRequestFullscreen) { // IE
				document.documentElement.msRequestFullscreen();
			} else {
				console.warn("Fullscreen API is not supported");
			}
		}
	// ... (rest of your functions - closeFullscreen, audio player, keydown event listener - are unchanged)

	// audio player

		var audioFolder = "audio/"; // Replace with the path to your audio folder
		var audioFiles = ['Abandoning Habits.mp3', 'Immarsat-4 F3.mp3', 'Philae.mp3', 'Vega 2.mp3']; // Fill in with the names of your audio files
		var audioQueue = shuffleArray([...audioFiles]);
		var audioElement = new Audio(audioFolder + audioQueue.pop());

		function shuffleArray(array) {
			for (var i = array.length - 1; i > 0; i--) {
				var j = Math.floor(Math.random() * (i + 1));
				[array[i], array[j]] = [array[j], array[i]]; // swap
			}
			return array;
		}

		audioElement.addEventListener('ended', function () {
			if (audioQueue.length === 0) {
				audioQueue = shuffleArray([...audioFiles]);
			}
			audioElement.src = audioFolder + audioQueue.pop();
			audioElement.play();
		});

		// Functions to control the audio player
		function playAudio() {
			audioElement.play();
		}

		function pauseAudio() {
			audioElement.pause();
		}

		function nextTrack() {
			if (audioQueue.length === 0) {
				audioQueue = shuffleArray([...audioFiles]);
			}
			audioElement.src = audioFolder + audioQueue.pop();
			audioElement.play();
		}

		function adjustVolume(volumeValue) { // 0.0 to 1.0
			audioElement.volume = volumeValue;
		}

		var count = 1;

		document.addEventListener('keydown', function (event) {
			//const audio = document.getElementById('myAudio');
			const volumeIncrement = 0.1; // Adjusts the volume by 10% each time

			// Check if the pressed key is the spacebar (key code 32)
		
			if (event.keyCode === 32) {
				if(count == 1){
					playAudio();
				} else if(count % 2 == 0){
					pauseAudio();
					count = 0;
				}
				count = count + 1;
				// Toggle play/pause
				// if (audio.paused) {
				// 	audio.play();
				// } else {
				// 	audio.pause();
				// }

				// Prevent the default action to avoid any side effects
				// (like scrolling the page if it's bigger than the viewport)
				event.preventDefault();
			}

			switch(event.key) {
        case ' ':
        // case 'Spacebar': // This is for some older browsers
        //     // Toggle play/pause
        //     if (audio.paused) {
        //         audio.play();
        //     } else {
        //         audio.pause();
        //     }

        //     // Prevent the default action
        //     event.preventDefault();
        //     break;
        
        case 'ArrowUp':
            // Increase volume
            if (audioElement.volume + volumeIncrement <= 1) {
                audioElement.volume += volumeIncrement;
            } else {
                audioElement.volume = 1; // Ensure volume doesn't exceed 1
            }
            break;

        case 'ArrowDown':
            // Decrease volume
            if (audioElement.volume - volumeIncrement >= 0) {
                audioElement.volume -= volumeIncrement;
            } else {
                audioElement.volume = 0; // Ensure volume doesn't go below 0
            }
            break;
		}
		});

    </script>

    <div class="audio-wrapper">
        <button onclick="playAudio()">Play</button>
        <button onclick="pauseAudio()">Pause</button>
        <button onclick="nextTrack()">Next</button>
        <input type="range" min="0" max="1" step="0.1" onchange="adjustVolume(this.value)" />
    </div>

</body>

</html>